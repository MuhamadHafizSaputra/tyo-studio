// SUMBER: WHO Child Growth Standards (0-5 Tahun) & WHO Reference 2007 (5-19 Tahun)
// Format: [Bulan, L, M, S]

// ==========================================
// 1. BERAT BADAN MENURUT UMUR (Weight-for-Age) - 0-5 TAHUN
// ==========================================

export const WHO_WFA_BOYS = [
  [0, 0.3487, 3.3464, 0.14602], [1, 0.2672, 4.4709, 0.13395], [2, 0.1983, 5.6001, 0.12459],
  [3, 0.1395, 6.4172, 0.11933], [4, 0.0906, 7.0391, 0.11612], [5, 0.0519, 7.5361, 0.11472],
  [6, 0.0223, 7.9439, 0.11436], [7, 0.0004, 8.3242, 0.11438], [8, -0.0163, 8.6859, 0.11463],
  [9, -0.0296, 9.0326, 0.11506], [10, -0.0409, 9.3662, 0.11571], [11, -0.0507, 9.6891, 0.1165],
  [12, -0.0594, 10.0033, 0.11743], [13, -0.0673, 10.31, 0.11843], [14, -0.0745, 10.6103, 0.11953],
  [15, -0.0812, 10.9051, 0.12071], [16, -0.0874, 11.1951, 0.12191], [17, -0.0933, 11.4809, 0.12317],
  [18, -0.0988, 11.7633, 0.12443], [19, -0.104, 12.0428, 0.12571], [20, -0.109, 12.3197, 0.127],
  [21, -0.1137, 12.5946, 0.12831], [22, -0.1183, 12.8679, 0.12961], [23, -0.1227, 13.1398, 0.13093],
  [24, -0.1269, 13.4106, 0.13222], [30, -0.1499, 14.9972, 0.14002], [36, -0.1691, 16.5169, 0.14736],
  [42, -0.1856, 17.9897, 0.15423], [48, -0.2, 19.4293, 0.16067], [54, -0.2125, 20.843, 0.16668],
  [60, -0.2235, 22.2393, 0.17228]
];

export const WHO_WFA_GIRLS = [
  [0, 0.4435, 3.2323, 0.14171], [1, 0.3519, 4.1866, 0.12747], [2, 0.2743, 5.1282, 0.11894],
  [3, 0.2087, 5.8459, 0.11425], [4, 0.1537, 6.4223, 0.11162], [5, 0.1082, 6.8993, 0.11066],
  [6, 0.0709, 7.297, 0.11075], [7, 0.0409, 7.6696, 0.11135], [8, 0.0169, 8.0242, 0.11229],
  [9, -0.0026, 8.3642, 0.1135], [10, -0.0189, 8.6922, 0.11488], [11, -0.0328, 9.0102, 0.11637],
  [12, -0.0448, 9.3197, 0.11795], [13, -0.0553, 9.6222, 0.11962], [14, -0.0645, 9.919, 0.12134],
  [15, -0.0728, 10.211, 0.12309], [16, -0.0802, 10.4993, 0.12486], [17, -0.0869, 10.7845, 0.12662],
  [18, -0.0931, 11.0669, 0.12838], [19, -0.0988, 11.3473, 0.13014], [20, -0.104, 11.626, 0.13187],
  [21, -0.1089, 11.9034, 0.13359], [22, -0.1135, 12.18, 0.13529], [23, -0.1178, 12.4563, 0.13697],
  [24, -0.1219, 12.7327, 0.13862], [30, -0.1437, 14.3752, 0.14815], [36, -0.1611, 16.0026, 0.15655],
  [42, -0.1755, 17.625, 0.16398], [48, -0.1876, 19.2526, 0.17056], [54, -0.198, 20.8931, 0.17642],
  [60, -0.207, 22.55, 0.18165]
];

// ==========================================
// 2. TINGGI BADAN MENURUT UMUR (Height-for-Age) - 0-5 TAHUN
// ==========================================

export const WHO_HFA_BOYS = [
  [0, 1, 49.8842, 0.03795], [1, 1, 54.7244, 0.03568], [2, 1, 58.4249, 0.03432],
  [3, 1, 61.4292, 0.03357], [4, 1, 63.886, 0.03321], [5, 1, 65.9026, 0.03309],
  [6, 1, 67.6236, 0.03332], [7, 1, 69.1645, 0.03347], [8, 1, 70.5994, 0.03362],
  [9, 1, 71.9576, 0.03376], [10, 1, 73.2533, 0.0339], [11, 1, 74.5222, 0.03403],
  [12, 1, 75.7481, 0.03417], [13, 1, 76.9216, 0.03429], [14, 1, 78.0401, 0.03441],
  [15, 1, 79.1152, 0.03452], [16, 1, 80.163, 0.03463], [17, 1, 81.206, 0.03473],
  [18, 1, 82.2533, 0.03482], [19, 1, 83.2976, 0.0349], [20, 1, 84.3276, 0.03498],
  [21, 1, 85.3347, 0.03505], [22, 1, 86.3159, 0.03512], [23, 1, 87.2715, 0.03519],
  [24, 1, 87.8437, 0.03538], [30, 1, 91.9329, 0.03603], [36, 1, 96.0845, 0.03635],
  [42, 1, 99.8152, 0.03692], [48, 1, 103.327, 0.03737], [54, 1, 106.677, 0.03781],
  [60, 1, 110.017, 0.03819]
];

export const WHO_HFA_GIRLS = [
  [0, 1, 49.1477, 0.03787], [1, 1, 53.6872, 0.03576], [2, 1, 57.0673, 0.03445],
  [3, 1, 59.8029, 0.0337], [4, 1, 62.0899, 0.03333], [5, 1, 64.0301, 0.0332],
  [6, 1, 65.7332, 0.03343], [7, 1, 67.2873, 0.03358], [8, 1, 68.7498, 0.03373],
  [9, 1, 70.1435, 0.03387], [10, 1, 71.4818, 0.03401], [11, 1, 72.7756, 0.03415],
  [12, 1, 74.0163, 0.03429], [13, 1, 75.2104, 0.03443], [14, 1, 76.3663, 0.03456],
  [15, 1, 77.4877, 0.03469], [16, 1, 78.5862, 0.0348], [17, 1, 79.6648, 0.0349],
  [18, 1, 80.7028, 0.0347], [19, 1, 81.7473, 0.0348], [20, 1, 82.7597, 0.03489],
  [21, 1, 83.7381, 0.03498], [22, 1, 84.6811, 0.03507], [23, 1, 85.5877, 0.03515],
  [24, 1, 86.4025, 0.03551], [30, 1, 90.7303, 0.03623], [36, 1, 95.0503, 0.03669],
  [42, 1, 99.0493, 0.03723], [48, 1, 102.666, 0.03775], [54, 1, 106.155, 0.03813],
  [60, 1, 109.432, 0.03859]
];

// ==========================================
// 3. BMI MENURUT UMUR (BMI-for-Age) - 5-19 TAHUN
// ==========================================

export const WHO_BMI_BOYS_5_19 = [
  [61, -1.2393, 15.2776, 0.08866],  // 5 Tahun 1 Bulan
  [72, -1.4556, 15.3377, 0.09177],  // 6 Tahun
  [84, -1.6841, 15.5393, 0.09673],  // 7 Tahun
  [96, -1.8972, 15.8643, 0.10255],  // 8 Tahun
  [108, -2.0721, 16.2971, 0.10864], // 9 Tahun
  [120, -2.1932, 16.8203, 0.11477], // 10 Tahun
  [132, -2.2514, 17.4332, 0.12097], // 11 Tahun
  [144, -2.2474, 18.1364, 0.12724], // 12 Tahun
  [156, -2.1895, 18.9103, 0.13328], // 13 Tahun
  [168, -2.0969, 19.7126, 0.13859], // 14 Tahun
  [180, -1.9863, 20.4851, 0.14272], // 15 Tahun
  [192, -1.8697, 21.1827, 0.14562], // 16 Tahun
  [204, -1.7513, 21.7828, 0.14757], // 17 Tahun
  [216, -1.6371, 22.2856, 0.14902], // 18 Tahun
  [228, -1.5284, 22.7099, 0.15024]  // 19 Tahun
];

export const WHO_BMI_GIRLS_5_19 = [
  [61, -1.0664, 15.0877, 0.09995],  // 5 Tahun 1 Bulan
  [72, -1.1398, 15.1783, 0.10427],  // 6 Tahun
  [84, -1.2429, 15.4243, 0.11065],  // 7 Tahun
  [96, -1.3524, 15.8115, 0.11802],  // 8 Tahun
  [108, -1.4485, 16.3274, 0.12513], // 9 Tahun
  [120, -1.5173, 16.9649, 0.13106], // 10 Tahun
  [132, -1.5542, 17.7027, 0.13543], // 11 Tahun
  [144, -1.5623, 18.4973, 0.13837], // 12 Tahun
  [156, -1.5451, 19.2811, 0.14022], // 13 Tahun
  [168, -1.5073, 19.9882, 0.14123], // 14 Tahun
  [180, -1.4539, 20.5891, 0.14172], // 15 Tahun
  [192, -1.3897, 21.0827, 0.14197], // 16 Tahun
  [204, -1.3197, 21.4921, 0.14227], // 17 Tahun
  [216, -1.2472, 21.8491, 0.14286], // 18 Tahun
  [228, -1.1738, 22.1741, 0.14389]  // 19 Tahun
];

// ==========================================
// 4. HELPER FUNCTIONS
// ==========================================

// Fungsi interpolasi untuk mencari nilai L, M, S berdasarkan bulan
export const getLMSData = (ageMonths: number, gender: 'male' | 'female', type: 'height' | 'weight' | 'bmi') => {
  const isMale = gender === 'male';
  let dataset;

  if (ageMonths > 60 && type === 'bmi') {
    // Gunakan dataset BMI untuk anak > 5 tahun (5-19 Tahun)
    dataset = isMale ? WHO_BMI_BOYS_5_19 : WHO_BMI_GIRLS_5_19;
  } else if (type === 'height') {
    dataset = isMale ? WHO_HFA_BOYS : WHO_HFA_GIRLS;
  } else {
    // Default ke weight (untuk balita) atau fallback
    dataset = isMale ? WHO_WFA_BOYS : WHO_WFA_GIRLS;
  }

  // Cari data bulan yang paling mendekati (Nearest Neighbor)
  const record = dataset.reduce((prev, curr) => 
    Math.abs(curr[0] - ageMonths) < Math.abs(prev[0] - ageMonths) ? curr : prev
  );

  return { L: record[1], M: record[2], S: record[3] };
};